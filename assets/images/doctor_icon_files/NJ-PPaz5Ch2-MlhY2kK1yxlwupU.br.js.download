var MiniHeader;(function(n){function dr(){if(pMMUtils&&typeof pMMUtils!="undefined"&&typeof pMMUtils.gebc=="function"&&typeof pMMUtils.gfbc=="function"&&typeof pMMUtils.sa=="function"&&typeof pMMUtils.r=="function"&&typeof pMMUtils.ib=="function"&&typeof pMMUtils.so=="function"&&typeof pMMUtils.sdt=="function"&&typeof pMMUtils.goh=="function"&&typeof pMMUtils.rc=="function"&&typeof pMMUtils.gs=="function")t=pMMUtils;else{t=null;return}if(h&&h.lastChild&&GetScrollTop){if(iu(),ft=!0,g){var n=t.gebc("b_scopebar",_d);n&&n.length>0&&(p=n[0])}sj_be(_w,"unload",bt);sj_evt.bind("ajax.unload",bt);sj_evt.bind("ajax.load",nr);y&&sj_be(y,"click",cr);nu();tr();rr();fr();gr()}}function gr(){var r=h.getBoundingClientRect(),i,n;if(r.bottom<=0&&t)for(i=_d.querySelectorAll("#miniheader a, #miniheader input"),n=0;n<i.length;n++)t.sa(i[n],"tabindex","-1")}function nr(){tr();rr();fr();a=_ge(yi);nt=_ge(ai);w=_ge(li)}function tr(){typeof MhConfig!="undefined"&&MhConfig&&(MhConfig.is!=null&&(lt=MhConfig.is),MhConfig.sbfc!=null&&(pi=MhConfig.sbfc),MhConfig.edsfs!=null&&(bi=MhConfig.edsfs),MhConfig.psfdss!=null&&(ki=MhConfig.psfdss),MhConfig.ucrs!=null&&(di=MhConfig.ucrs),MhConfig.epaos!=null&&(gi=MhConfig.epaos),MhConfig.drib!=null&&(ii=MhConfig.drib))}function nu(){var n,r;if(t)for(n=0;n<i.length;n++)r=t.ga(i[n],"type"),r&&(gt[r]=n)}function ir(n){for(var t=n,i=0;t;)i+=t.offsetTop,t=t.parentElement;return i}function rr(){var r=_ge("rfPane"),f=_ge("vsb_vid_cat"),e=_ge("vm_c"),n;gi&&e?b=e.offsetTop:f?b=ir(f):r?b=ir(r):(n=_ge("b_header"),b=n?n.clientHeight:0);var o=ur(),i=t.gcs(h.querySelector("table")),s=i&&!isNaN(parseInt(i.height))?parseInt(i.height):0;v=[0];v[u.Hide]=-(o+s+pr);v[u.Pinned]=-o;v[u.Expand]=0}function ur(){var r=0,n,i;return p&&t&&(n=t.gcs(p),n&&(i=parseInt(n.height),r=isNaN(i)?0:i)),r}function fr(){if(t){if(f&&(k=f.querySelector('[name="form"]'),ni=k?k.value:""),r=0,lt==u.Pinned)t.sa(h,"aria-hidden",!1),sj_be(_w,"scroll",hr),er(),it(u.Pinned);else if(lt==u.Hide){t.sa(h,"aria-hidden",!0);sj_be(_w,"scroll",yt);it(u.Hide);var n=GetScrollTop();n>b?(ei(),typeof MiniHdrImgLoader=="undefined"||MiniHdrImgLoader===null||MiniHdrImgLoader.LoadThumbnail(r)):pt();et=n}i.length>0&&(t.so(i[r],1),t.sdt(i[r],DisplayType.Block));t.sdt(h,DisplayType.Block)}}function tu(){var n,i,r,u;t&&(n=_ge("miniheader_logo"),i=t.gfbc("b_searchboxForm"),di&&n&&i&&(r=n.firstChild,u=i.firstChild,r&&u&&(t.r(n,r),t.ib(i,r,u))),h&&d&&(d.style.display="none",n&&(n.style.visibility="hidden")))}function iu(){var n,i,r;s!=null&&o!=null&&f!=null&&t&&(n=t.ga(s,"data-query-override"),o!=null&&n&&(o.value=n),i=t.ga(s,"data-target-override"),f!=null&&i&&t.sa(f,"target",i),r=t.ga(s,"data-action-override"),f!=null&&r&&t.sa(f,"action",r))}function er(){ot&&(sb_ct(ot),ot=null);f&&s&&(s.style.visibility="visible",k&&(k.value=pi),a=ui(f,s,yi,!1,!0,yr),e&&a&&e.parentNode&&a.parentNode&&e.parentNode===a.parentNode&&(nt=ui(e,s,ai,!0)),o&&(e&&sj_be(e,"mousedown",at),st&&sj_be(st,"mousedown",at),sj_be(o,"focus",or),sj_be(o,"blur",vt)));p&&g&&(w=ui(p,g,li));tu();ru()}function ru(){v[u.Pinned]=-ur()}function at(){sj_ue(o,"blur",vt)}function or(){o&&t&&(ct&&(sb_ct(ct),ct=null),sj_evt.fire(n.SearchBoxEvent[n.SearchBoxEvent.SearchBoxStatusChange],n.SearchBoxStatus.Focus),t.ac(o,"focus"),t.ac(h,"sb-focused"),e&&e.firstChild&&t.sdt&&t.sdt(e.firstChild,DisplayType.Block))}function sr(){o&&o.blur()}function vt(){t&&(e&&e.firstChild&&t.goh(e.firstChild)>0&&t.sdt(e.firstChild,DisplayType.Default),sj_evt.fire(n.SearchBoxEvent[n.SearchBoxEvent.SearchBoxStatusChange],n.SearchBoxStatus.Blur),ct=sb_st(function(){t.rc(o,"focus");t.rc(h,"sb-focused")},br))}function ui(n,t,i,r,u,f){r===void 0&&(r=!1);u===void 0&&(u=!1);f===void 0&&(f=null);var e=sj_ce("span",i);return n.parentNode&&n.parentNode.replaceChild(e,n),!t.firstChild||r&&t.firstElementChild.id!==n.id||u&&t.firstElementChild.id===f?t.appendChild(n):t.firstChild.parentNode.replaceChild(n,t.firstChild),e}function uu(){while(s.children.length>0)s.removeChild(s.lastChild)}function fu(){if(lr(),f&&a&&t){if(k&&ni&&(k.value=ni),s.style.visibility="hidden",s.firstChild){var n=t.gebc("b_searchboxForm",f);n&&n.length>0&&s.replaceChild(n[0].cloneNode(!0),s.firstChild)}a.parentNode&&a.parentNode.replaceChild(f,a);e&&nt&&nt.parentNode&&nt.parentNode.replaceChild(e,nt)}p&&w&&g.firstChild&&(g.replaceChild(w.cloneNode(!0),g.firstChild),w.parentNode&&w.parentNode.replaceChild(p,w));ot=sb_st(function(){ot=null;uu()},1e3)}function hr(){var n=GetScrollTop(),t=n-et;Math.abs(t)<=wi||(ii||sr(),et=n)}function yt(){var t=GetScrollTop(),i=t-et,n,f;Math.abs(i)<=wi||(ii||sr(),t>b?(ei(),i>0?ut==u.Expand&&it(u.Pinned):i<0&&ut==u.Pinned&&it(u.Expand),n=eu(t),typeof MiniHdrImgLoader=="undefined"||MiniHdrImgLoader===null||MiniHdrImgLoader.LoadThumbnail(n),n!==c&&(f=n>c?"down":"up",c=n,wt(c),dt("Change",{Direction:f},l[c]?l[c]:""))):(pt(),r!=0&&(c=0,wt(0))),et=t)}function eu(n){var i,t;if(rt.length>1){for(i=0,t=1;t<rt.length;t++){if(rt[t]>n)return i;i=t}return i}return bi?Math.min(Math.floor(n/ki),vr):0}function ou(n){return gt[l[n]]?gt[l[n]]:n}function cr(){var n=(r+1)%i.length;dt("Click",{Component:"dsselector"},l[n]?l[n]:"",!0);wt(n)}function it(i){t.smt(h,v[i]);ut=i;n.visibleHeight=v[i]-v[u.Hide]}function ei(){ut==u.Hide&&t&&(d&&(d.style.display="none",f&&(f.style.top="-25px")),t.sa(h,"aria-hidden",!1),kt(i[r],!0),oi(r),er(),it(u.Pinned),fi=sb_gt(),dt("Show",null,l[r]?l[r]:""),sj_evt.fire(n.MiniHeaderEvent[n.MiniHeaderEvent.ShowMiniHeader]))}function pt(){ut!=u.Hide&&t&&(d&&(d.style.display="flex",f&&(f.style.top="0px")),t.sa(h,"aria-hidden",!0),kt(i[r],!1),it(u.Hide),fu(),fi&&dt("Hide",{Duration:sb_gt()-fi}),sj_evt.fire(n.MiniHeaderEvent[n.MiniHeaderEvent.HideMiniHeader]))}function su(){if(!ti&&!ft){var n=GetScrollTop();n>b&&ei();sj_be(_w,"scroll",yt);ft=!0}}function hu(){!ti&&ft&&(pt(),sj_ue(_w,"scroll",yt),ft=!1)}function wt(n){if(i.length>n&&t&&t.gs(i[n],"display")!="block")if(kt(i[r],!1),kt(i[n],!0),typeof ri!="undefined"&&ri){var u=i[r],f=i[n];t.sdt(i[n],DisplayType.Block);n>r?MMCssAnim.animate(u,f,"up"):MMCssAnim.animate(u,f,"down");setTimeout(function(){oi(n);t.sdt(i[r],DisplayType.Default);r=n},500)}else MMAnim.fadeOut(i[r],10),MMAnim.fadeIn(i[n],10,"block",function(){oi(n);t.sdt(i[r],DisplayType.Default);r=n})}function oi(n){if(y&&t){tt||(tt=t.gebc("indic",y));tt.length>r&&tt.length>n&&(t.rc(tt[r],"sel"),t.ac(tt[n],"sel"));var f=(n+1)%i.length,u=t.gebc("lt",i[f]);u&&u.length>0&&t.sa(y,"title",u[0].innerHTML)}}function bt(){sj_ue(_w,"unload",bt);sj_evt.unbind("ajax.unload",bt);sj_evt.unbind("ajax.load",nr);sj_ue(_w,"scroll",yt);sj_ue(_w,"scroll",hr);y&&sj_ue(y,"click",cr);o&&vt();lt==u.Hide?pt():f&&vi&&t&&t.a(vi,f);ti=!0;lr()}function lr(){o&&(e&&sj_ue(e,"mousedown",at),st&&sj_ue(st,"mousedown",at),sj_ue(o,"focus",or),sj_ue(o,"blur",vt))}function kt(n,i){n&&t&&t.ga(n,"data-tag")&&t.sa(n,"data-tag","multimedia.miniHeaderData"+(i?"Visible":""))}function dt(n,t,i,r){if(kr||r){var u=i?i:n;si[u]||(i&&(t||(t={}),t.Dataset=i),ar.logEvent(null,"CI."+n,null,"miniheader",t,null),si[u]=!0)}}function cu(n,t){var i,r;ht[n]||(ht[n]=rt.length);t=t+(hi?hi.offsetTop:0)+wr;i=ht[n];rt[i]=t;l[i]=n;r=GetScrollTop();r>t&&(c=ht[n],wt(ou(c)))}var t=typeof pMMUtils!="undefined"?pMMUtils:null,ar=pInstr,h=_ge("miniheader"),ci=_ge("miniheader_data"),d=_ge("tallhead"),i=ci?ci.children:[],vr=i.length,y=_ge("miniheader_switch"),g=_ge("miniheader_scope"),p,s=_ge("miniheader_searchbox"),w,li="scope_pl",nt,ai="as_pl",e=_ge("sw_as"),o=_ge("sb_form_q"),st=_ge("sb_form_go"),rt=[0],l=["RelatedSearch"],gt={},ht={},r,ut,u,ot,c,fi,si,hi;(function(n){n[n.Hide=0]="Hide";n[n.Pinned=1]="Pinned";n[n.Expand=2]="Expand"})(u||(u={}));var v,f=_ge("sb_form"),vi=f?f.parentNode:null,a,yi="search_pl",yr="mnh_sbc",b=0,ft;n.visibleHeight=0;var ni,pi="QBIRMH",k,pr=10,wr=75,tt,wi=30,br=300,ct,kr=!1,ti=!1,et=0,lt=u.Hide,bi=!1,ki=1e3,di=!1,gi=!1,ii=!0,ri;typeof MMCssAnim!="undefined"&&MMCssAnim&&(ri=MMCssAnim);n.init=dr;c=0;n.enable=su;n.disable=hu;si={};hi=_ge("vm_res")||_ge("vm_c");n.registerInlineBlock=cu})(MiniHeader||(MiniHeader={}));MiniHeader.init()